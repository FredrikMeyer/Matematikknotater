\documentclass[11pt, english]{article}
%\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}   % S P R A A K
% \usepackage{graphicx}    % postscript graphics
\usepackage{amssymb, amsmath, amsthm, amssymb} % symboler, osv
\usepackage{mathrsfs}
\usepackage{url}
\usepackage{thmtools}
\usepackage{enumerate}  % lister $  
\usepackage{float}
\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{calc}
%\usepackage{tikz-3dplot}
\usepackage{subcaption}
\usepackage[all]{xy}   % for comm.diagram
\usepackage{wrapfig} % for float right
\usepackage{hyperref}
\usepackage{mystyle} % stilfilen      

%\usepackage[a5paper,margin=0.5in]{geometry}


\begin{document}
\title{Exercises}
\author{Fredrik Meyer}
\maketitle 

I solve and type exercises from different places (read \emph{books}). 

\section{Algebraic Geometry - Hartshorne}

\subsection{Chapter I - Varieties}

\begin{exc}[Exercise 1.1]
  \begin{enumerate}[a)]
  \item Let $Y$ be the plane curve $y=x^2$. Show that $A(Y)$ is isomorphic to a polynomial ring in one variable over $k$.
\item Let $Z$ be the plane curve $xy=1$. Show that $A(Z)$ is not isomorphic to a polynomial ring in one variable over $k$.
\item Let $f$ be any irreducible quadratic polynomial in $k[x,y]$, and let $W$ be the conic defined by $f$. Show that $A(W)$ is isomorphic to $A(Y)$ or $A(Z)$. Which one is it when?
  \end{enumerate}
\end{exc}
\begin{sol}
  \begin{enumerate}[a)]
  \item  We have $A(Y)=k[x,y]/(y-x^2)$. An isomorphism $A(Y) \to k[t]$ is given by $x \mapsto t$ and $y \mapsto t^2$. 
\item We have $A(Z) = k[x,y]/(xy-1) \simeq k[x,\frac 1x]$. So we must show that $k[x,\frac 1x] \not \approx k[x]$. It can be computed that the first one has automorphisms given by $x \mapsto cx^n$ for $c$ nonzero and $n \neq 0$. The second has as automorphisms $ax+b$ ($a \neq 0$). So the first one have an abelian automorphism group, the second has not.
\item What is special about $A(Y)$ and $A(Z)$? Staring at pictures, we see that any line in $\Aa^2$ intersects $Y$ in at least one point, but in the case of $Z$, there exist two lines which do not intersect $Z$. We claim that this is the only two things that can happen.

First we claim that if we are in the second situation, that is, if there exist a pair of lines $\ell,\ell'$ such that $W \cap \ell = W \cap \ell' =\emptyset$, then $W \simeq Z$. 

A general quadric can be written as
\[
ax^2+bxy+cy^2+dx+ey+f=0.
\]
Suppose now $\ell \cap W=\emptyset$. This is equivalent to $I(f,\ell^\vee)=(1)$. Without loss of generality, we can assumme $\ell = \{ x = 0 \}$. Then
\[
I(f,\ell) = (cy^2+ey+f,x).
\]
This generates $k[x,y]$ if and only if $c=e=0$ and $f \neq 0$. Thus $f$ must be of the form
\[
ax^2+bxy+dx+f=0
\]
with $f \neq 0$. But this can be written as
\[
x(ax+by+d)+f = 0.
\]
Put $y' = ax+by+d$. Then $I(W)$ takes the form $(xy'+f=0)$, which is clearly isomorphic to $Z$ after a linear change of coordinates. Note that the other line not meeting $W$ is the line given by $y'=ax+by+d=0$.

Assume now that we are in the other situation, namely that \emph{every} line in $\Aa^2$ meets $W$. Now pick a tangent line $\ell$ of $W$. Without loss of generality, we can assume that $\ell$ is $\{ y=0 \}$. This is a tangent line if and only if it meets $W$ doubly, meaning that $I(W) + (\ell^\vee)$ takes the form $(l^2,y)$ for some linear form $l$. We can also assume that $\ell \cap W = (0,0)$, so that $I(W) + (\ell^\vee) =(x^2,y)$. But this means that
\begin{align*}
  I(W) + I(\ell) &= (ax^2+bxy+cy^2+dx+ey+f,y) \\
&= (ax^2+dx+f,y)
\end{align*}
We want $ax^2+dx+f=x^2$. This can happen only if $d=f=0$ and $a \neq 0$. Thus the quadric takes the form
\[
ax^2+bxy+cy^2+ey=0.
\]
Now we claim that there exist one line at each point of $W$ that intersect $W$ transversally in exactly one point. This is the case for $Y$. Consider the pencil of lines through $(0,0)$ defined by $x=\lambda y$. We want to find $\lambda$ such that the intersection is transversal and only one point. We have
\[
( ax^2+bxy+cy^2+ey, x-\lambda y) = \left( (a\lambda ^2+b\lambda+c)y^2+ey,x-\lambda y \right).
\]
This have exactly one solution if and only if $a\lambda^2+b\lambda+c=0$. This is solvable since $a \neq 0$ and since all lines intersect $W$. Thus choose $\lambda$ as above. We can rotate this line such that it becomes $x=0$. Then the equation takes the form
\[
ax^2+bxy+ey=0.
\]
We have still not arrived at $y=x^2$. Let now $y=\lambda x$ be a general line through the origin. We demand that this intersect $W$ twice for every $\lambda$ such that the line is not tangent. We get that the intersection is given by
\[
ax^2+b\lambda x+ex = x((a+\lambda b)x+e) = 0.
\]
For this to have two solutions for every $\lambda$ we must have $a+\lambda b \neq 0$ for all $\lambda$. But this requires $b =0$.  Thus the equation is
\[
ax^2+ey = 0
\]
which is the conic we were looking for.
  \end{enumerate}
\end{sol}

\begin{exc}[Exercise 1.2, the twisted cubic curve]

Let $Y \subseteq \Aa^3$ be the set $\{ (t,t^2,t^3) \mid t \in k\}$. Show that $Y$ is an affine variety of dimension $1$. Find generators for the ideal $I(Y)$. Show that $A(Y)$ is isomorphic to a polynomial ring in one variable over $k$. We say that $Y$ is given by the \emph{parametric equation} $x=t,y=t^2,z=t^3$.  
\end{exc}
\begin{sol}
An affine variety is by definition a closed irreducible subset of $\Aa^3$. So we must find an irreducible ideal $I$ such that $Z(I)=Y$ (forgive the abuse of notation).

I claim that $I(Y)=\langle x^2-y,x^3-z \rangle$. Clearly, every $P \in Y$ satisfies these equations. This shows the inclusion $Y \subset Z(I)$. Now suppose $P \in Z(I)$, that is, $f(P)=0$ for all $f \in I$. In particular $(x^2-y)(P)=0$ and $(x^3-z)(P)=0$. Thus $y=x^2$ and $z=x^3$. So if $P=(a,b,c) \in k^3$, then $P=(a,a^2,a^3)$, so $P \in Y$. This shows that $Z(I)=Y$. If we can show that $I$ is prime, then it follows that $I(Y)=I$ and that $Y$ is a variety.

In fact, we claim that $k[x,y,z]/I \simeq k[t]$, implying that $I$ is prime. The map $\varphi$ is given by $x \mapsto t$, $y \mapsto t^2$, $z \mapsto t^3$. Then clearly $I \subseteq \ker \varphi$. We must show equality. So suppose $\varphi(f)=0$. 

First we claim that any $f \in k[x,y,z]$ can be written as $f=R(x)+S(x)y+T(x)z+i(x,y,z)$ where $i$ is a polynomial in $I$. We prove this by induction on $\deg f$. If $\deg f = 1$, this is trivially true.  The rest of the proof proceeds by tedious induction.
\end{sol}

\subsection{Chapter II - Schemes}

\begin{exc}[Excercise 7.1]
Let $(X,\OO_X)$ be a locally ringed space and let $f:\mathscr L \to \mathscr M$ be a surjective map of invertible sheaves on $X$. Show that $f$ is an isomorphism.  
\end{exc}
\begin{sol}
Since $\mathscr L, \mathscr M$ are invertible, we have isomorphisms $\mathscr L_x \approx \OO_{X,x}$ and $\mathscr M_x \approx \OO_{X,x}$ for each $x \in X$.

But $\Hom_{\OO_{X,x}}(\OO_{X,x},\OO_{X,x})=\OO_{X,x}$, that is, all homomorphisms are given by multiplication by some $h \in \OO_{X,x}$. But since $f$ was surjective, we conclude that $h$ is outside $\mm_x$, the maximal ideal of $\OO_{X,x}$. But then $h$ is a unit, so $f$ is an isomorphism.
\end{sol}

\subsection{Chapter III - Cohomology}

\begin{exc}[Exercise 4.3]
Let $X= \Aa^2_k=\Spec k[x,y]$ and let $U = X \bs \{(0,0)\}$. Use a suitable open cover of $X$ by open affine subsets to show that $H^1(U,\OO_U)$ is isomorphic to the $k$-vector space spanned by $\{ x^i y^j \mid i,j < 0 \}$. In particular, it is infinitedimensional, and so $U$ cannot be affine (not projective either).  
\end{exc}
\begin{sol}
We can cover $U$ by $U_1= \Aa^2 \bs \{ x= 0\}$ and $U_2 = \Aa^2 \bs \{ y = 0\}$. We have $U_1 \cap U_2 = \Aa^2 \bs \{ xy=0\}$. Also, $\OO(U_1)=k[x,y,\frac 1x]$ and $\OO(U_2)=k[x,y,\frac 1y]$ and $\OO(U_1 \cap U_2) = k[x,y,\frac {1}{xy}]$. Then the \v{C}ech complex takes the form
\[
0 \to k[x,y,\frac 1x] \times k[x,y, \frac 1y] \xrightarrow{d} k[x,y,\frac{1}{xy}] \to 0,
\]
the differential being difference. Then $H^1(U,\OO_U)$ can be computed as the homology at the second term. But nothing on the left side can hit anything of the form $x^iy^j$ with $i,j < 0$. Anything else is hit. Thus we have
\[
H^1(U, \OO_U) \simeq \{ x^i y^j \mid i,j < 0 \}
\]
as $k$-vector spaces.
\end{sol}

\begin{exc}[Exercise 4.7]
Let $X$ be the subscheme of $\PP_k^2$ defined by a single homogeneous polynomial $f(x_0,x_1,x_2)=0$ of degree $d$. Assume that $(1,0,0)$ is not on $X$. Then show that $X$ can be covered by the two open affine subsets $U= X \cap \{ x_1 \neq 0\}$ and $V = X \cap \{ x_2 \neq 0\}$. Now calculate the \v Cech complex
\[
\Gamma(U,\OO_X) \oplus \Gamma(V,\OO_X) \to \Gamam(U \cap V, \OO_X)
\]
explicitly, and thus show that
\begin{align*}
  \dim_k H^0(X,\OO_X) &= 1 \\
\dim _k H^1(X,\OO_X) &= \frac 12 (d-1)(d-2).
\end{align*}
\end{exc}

\begin{sol}
  $X$ can be covered by just two open affines since $\PP^2 \bs (U \cup V) = \{(1:0:0)\}$, which was assumed not to lie on the curve.

The open affine subset $\Gamma(U, \OO_X)$ can be identified with the polynomial ring $k[u,v]/\langle f(u,1,v) \rangle$, and $\Gamma(V,\OO_X) = k[x,y]/f(x,y,1)$. The differential is then given by 
\[
\left( g(u,v), h(x,y) \right) \mapsto g(xy^{-1},y^{-1})-h(x,y) \in k[x,y,\frac 1y].
\]

We can assume that $f=x_0^d$, since what really matters is the degree, and we are just doing linear algebra.

We first calculate $H^0(X,\OO_X)$. So suppose $g(xy^{-1}, y^{-1})-h(x,y)=0$ in $k[x,y,y^{-1}]/\langle f(x,y,1) \rangle$. By definition this means that
\[
g(xy^{-1},y^{-1}) - h(x,y) = f(x,y,1) \cdot \tilde f(x,y,\frac 1y)
\]
for some polynomial $\tilde f$. Write $\tilde f$ as $\tilde f_0 + \tilde f_1$, where $\tilde f_0=\sum_{j < 0} a_{ij} x^i y^j$ and $\tilde f_1 \in k[x,y]$. Then we have the equality
\[
g(xy^{-1},y^{-1}) - h(x,y) = \sum_{j < 0} a_{ij}x^{i+d}y^j + \sum_{j \geq 0} x^{i+d} y^j.
\]
First of all, we see that the constant terms of $g$ and $h$ must be equal, because there are no constant terms on the right hand side. Secondly, $g(xy^{-1},y^{-1})$ consists solely of terms with $j < 0$. Thus the non constant terms of  $g(xy^{-1},y^{-1})$ must be equal to the left term of the right hand side above. But both terms of the right hand side are zero modulo $f$, so the constant terms of $g(xy^{-1},y^{-1})$ are also zero mod $f$. The same holds for $h(x,y)$. Thus $H^0(X,\OO_X)= \{ (c,c) \mid c \in k \} \simeq k$.

Now we compute $H^1(X,\OO_X)$. Consider a monomial $x^iy^j$ in the target. If both $i,j \geq 0$, then it is hit by $(0,-x^iy^j)$. Likewise, if $j \geq i$, then $(x^iy^{j-i},0) \mapsto x^i x^{-j}$. Thus all monomials $x^iy^{-j}$ with $j \geq i$ is zero in the cokernel. Further, if $i \geq d$, then $x^i y^j$ is already zero! Thus, we can draw the non-zero monomials in the cokernel as points in the lattice $\Z^2$. This is a triangle of length $d-2$. Thus the dimension of $H^1(X,\OO_X)$ is 
\[
1 + 2 + \ldots+ d-3 + d-2 = \frac 12 (d-2)(d-2+1) = \frac 12 (d-2)(d-1).
\]
\end{sol}

\subsection{Chapter IV - Curves}

\begin{exc}[Exercise 1.1]
Let $X$ be a curve and $P \in X$ a point. Show that there exists a nonconstant rational function $f \in K(X)$ which is regular everywhere except at $P$.
\end{exc}
\begin{sol}
Let $D$ be the divisor $D=nP$. The linear system 
$$
\{ E = D + f \geq 0 \}
$$
consists of all divisors linearly equivalent to $D$. But these are classified by those $f$ with $(f) \geq -nP$, i.e. those $f$ with at most poles of order $n$ at $P$.

By Riemann-Roch we have
$$
l(D)-l(K-D) = \deg D +1 -g = n+1-g.
$$
If $n$ is large enough, $K-D$ will have negative degree, so $l(K-D)=0$. Thus for large $n$, we can get $l(D)$ as big as we want.

\end{sol}

%%%%%%%%%%%%%%%
\section{Commutative Algebra - Eisenbud}

\subsection{Chapter 16 - Modules of Differentials}
\begin{exc}[Exercise 16.1]
Show that if $b \in S$ is an idempotent ($b^2=b$), and $d:S \to M$ is any derivation, then $db=0$.  
\end{exc}
\begin{sol}
This is trivial. $db=d(b^2)=2db$. If $2=0$, then the statement is automatically true. If not, then $db=0$ by subtraction. 
\end{sol}

\section{Deformation Theory - Hartshorne}

\subsection{Chapter I.3 - The $T^i$ functors}

\begin{exc}[Exercise 3.1]
Let $B=k[x,y](xy)$. Show that $T^1(B/k,M)=M \otimes k$ and $T^2(B/k,M)=0$ for any $B$-module $M$.  
\end{exc}
\begin{sol}
Since $B$ is defined by a principal ideal in $P=k[x,y]$, it follows that $L_2=0$ in the cotangent complex. Thus $T^2(B/k,M)$ is automatically zero.

We have that $L_1 = B$ and $L_0 = B dx \oplus B dy$ with $d_1$ being $f \mapsto (fy,fx)$. Applying $\Hom(-,M)$, we get $\Hom(L_0,M)=M \oplus M$ and $\Hom(L_1,M)=M$.

We have $\Hom(B \oplus B,M) \simeq M \oplus M$ by $\phi \mapsto (\phi(1,0),\phi(0,1)$. We have a diagram
\[
\xymatrix{
\Hom(B \oplus B, M) \ar[d]_{\simeq} \ar[r]^{\psi^\ast} & \Hom(B,M) \ar[d]^{\simeq} \\
M \oplus M  \ar[r] & M
}
\]
Under these isomorphisms, it is easy to see that the bottom map is given by
\[
(\phi(1,0),\phi(0,1)) \mapsto y \phi(1,0) + x\phi(0,1).
\]
Thus since $T^1$ is the cokernel of this map, we must have $T^1(B/k,M) = M \otimes k$. 
\end{sol}

\begin{exc}[Exercise 3.3]
Let $B = k[x,y]/(x^2,xy,y^2)$. Show that $T^0(B/k,B) = k^4$, $T^1(B/k,B)=k^4$ and $T^2(B/k,B)=k$.  
\end{exc}

\begin{sol}
Let's compute $L_2$ first. For that we need part of a resolution of $I$. We have in fact
\[
0 \to \im \begin{pmatrix} -y & 0 \\ x & -y \\ 0 & x \end{pmatrix} \to P(-2)^3 \to I \to 0.
\]
The Koszul relations are given by 
\[
\im \begin{pmatrix}
-y^2 & -xy & 0 \\
0 & x^2 & -y^2 \\
x^2 & 0 & xy
\end{pmatrix}.
\]
Let's compute $Q/F_0$ (relations modulo Koszul relations). Since $Q$ is generated in degree $3$, and $F_0$ is of degree $4$, we have $\dim_k (Q/F_0)_3 = 2$. Let's consider degree $4$. As a $k$-vector space $Q_4$ is spanned by the four elements
\[
\begin{pmatrix}
  -y^2 \\ xy \\ 0 
\end{pmatrix},
\begin{pmatrix}
  0 \\ -y^2 \\ xy 
\end{pmatrix},
\begin{pmatrix}
  -yx \\ x^2 \\ 0
\end{pmatrix},
\begin{pmatrix}
  0 \\ -yx \\ x^2
\end{pmatrix}.
\]
The two in the middle are already Koszul relations, so that $(Q/F_0)_4$ have dimension $\leq 2$. But we also have
\[
\begin{pmatrix}
  -y^2 \\ xy \\ 0
\end{pmatrix} = 
\begin{pmatrix}
0 \\ yx \\ -x^2 
\end{pmatrix}
+
\begin{pmatrix}
-y^2 \\ 0 \\ x^2
\end{pmatrix}.
\]
Thus $\dim_k (Q/F_0)_4=1$, since the second term above is a Koszul relation. Similarly we find that $\dim_k (Q/F_0)_5 =0$. Hence, $L_2$ is the $3$-dimensional $k$-vector space spanned by $Q_3$ and one more relation. $L_1$ is $F \otimes B=B^3$, and $L_0$ is $B \oplus B$, spanned by $dx,dy$.

Taking duals, we get that $L_2 = \Hom(Q/F_0,B)$. This set can be identified with
\begin{align*}
\Hom(Q/F_0,B) &= \{ \varphi: Q \to B \mid \restr{\varphi}{F_0} = 0 \} \\
&= \{ \varphi: Q \to P \mid \im \restr{f}{F_0} \subseteq I \}
\end{align*}
Thus, since $I= \mm^2$, we must have that $\varphi$ sends the two generators of $Q$ to something of degree $1$ (degree $0$ is not ok, since then $F_0$ would be sent outside $I$). Thus $\Hom(Q/F_0,B)$ is $2 \times 2=4$-dimensional, spanned by 
\[
\im 
\begin{pmatrix}
  y & x & 0 & 0 \\
0 & 0 & x & y
\end{pmatrix}.
\]
But $d_2$ is the dual of the inclusion $Q \to F$ from the exact sequence above. The dual is given by transposing, and we are left with one column - in conclusion, $T^2(B/k,B)$ is one-dimensional.

The Jacobian of $I$ is given by
\[
\begin{pmatrix}
  2x & y & 0 \\
0 & x & 2y 
\end{pmatrix},
\]
and it is easily seen that the kernel of $\text{Jac} \otimes B$ is given by $\mm \oplus \mm \oplus \mm \subset B^3$. The two relations kill off two dimensions, so $\dim_k T^1(B/k,B) = \dim_k \mm^{\oplus 3} - 2 = 6-2=4$.

Also $T^0(B/k,B)$ is $B^2$ modulo the image of the Jacobian. The constants are left untouched, so $\dim_k T^0(B/k,B) = 2+2+2-3=3$. A basis is given by $(1,0),(0,1)$ and $(x,y)$. (thus Hartshorne is wrong?)
\end{sol}

\section{Introduction to Commutative Algebra - Atiyah-MacDonald}

\subsection{Chapter 1 - Rings and ideals}

\begin{exc}
Let $x$ be a nilpotent element of a ring $A$. Show that $1+x$ is a unit of $A$. Deduce that the sum of a nilpotent element and a unit is a unit.
\end{exc}
\begin{sol}
Suppose $x^{n+1}=0$ and that $x^n \neq 0$. Consider
\[
s = 1-x+x^2-x^3+\ldots+x^n
\]
Then
\[
sx = x-x^2+x^3-x^4+\ldots-x^n
\]
since $x^{n+1}=0$. But then $s+sx=1$, so that $s(1+x)=1$. Hence $1+x$ is a unit. To prove that the sum of any unit and any nilpotent is a unit, note that if $u$ is any unit, then $u^{-1}x$ is still nilpotent. So since $u+x=u(1+u^{-1}x)$ and product of units are units, the claim follows.
\end{sol}

\subsection{Chapter 2 - Modules}

\begin{exc}[Excercise 1]
Show that $\Z/m \otimes_Z \Z/n = 0$ if $m,n$ are coprime.
\end{exc}
\begin{sol}
Write $1=am+bn$. Then 
\begin{align*}
1 \otimes 1 = (am+bn) \otimes 1 &= am \otimes 1 + bn \otimes 1 \\
&=  0 + bn \otimes 1 = 1 \otimes bn = 1 \otimes 0 = 0.
\end{align*}
And we are done.
\end{sol}

\begin{exc}[Exercise 2]
 Let $A$ be a ring, $\ia$ an ideal, and $M$ an $A$-module. Then $(A/\ia) \otimes_A M$ is isomorphic to $M/\ia M$.
\end{exc}
\begin{sol}
Start with
\[
0 \to \ia \to A \to A/ \ia \to 0.
\]

Tensoring with $M$ gives
\[
\ia \otimes M  \to M \to A/\ia \otimes_A M \to 0.
\]
But $\ia \otimes_A M \simeq \ia M$, so that the sequence reads $A/\ia \otimes M \simeq M/\ia M$.
\end{sol}

\begin{exc}[Exercise 3]
 Let $A$ be a local ring, $M,N$ finitely generated $A$-modules. Prove that if $M \otimes N=0$, then $M=0$ or $N = 0$. 
\end{exc}
\begin{sol}
First a counterexample if $A$ is not a local ring. Let $A=k[x]$ and $M=k[x]/(x-1)$ and $N=k[x]/(x)$. We can write $1 = -(x-1) + x$. Then $M \otimes_A N = 0$ by the same method as in Exercise 1 ($1 \otimes 1 = (-x+1 + x) \otimes 1 = x \otimes 1 = 1 \otimes x = 0$). 

Let $M_k := M \otimes k = M/\mm M$. By Nakayama's lemma, $M_k=0 \Rightarrow M=0$.

So suppose $M \otimes_A N=0$. Then $(M \otimes_A N)_k = 0$. But this is isomorphic to $M_k \otimes_A  N_k$ since $k \otimes_A k = k$. But $M_k \otimes_A N_k \simeq M_k \otimes_k N_k$, as $k$-modules, since everything in $\mm$ acts trivially on $M_k$. But these are vector spaces over a field, now we must have $M_k=0$ or $N_k=0$, and by Nakayama we are done.
\end{sol}
\end{document}
